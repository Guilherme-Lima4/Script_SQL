
Create database loja_info
Go
Use loja_info
Go
Create table Vendas(
id_produto int  not null  PRIMARY key  identity,
id_cliente int not null
CONSTRAINT fk_venda_cliente
FOREIGN KEY (id_cliente) REFERENCES cliente(id_cliente),
nome_prod  varchar(50) not null,
Data datetime not null, 
Nome_client  varchar(50)  not null,
idVenda int not null

)
go
Create table cliente(
Id_cliente int not null primary key,
DataNasc datetime not null,
Nome_client  varchar(50)  not null,
Enderc varchar(100) not null,
Telephone int not null
)
go
Create table Vendas_Canceladas  (
id_produto int  not null ,
nome_prod  varchar(50) not null,
Data datetime not null, 
Id_cliente int not null,
idVendasc int not null primary key
)
go
Create table Item_Vendido(
id_produto int  not null 
CONSTRAINT fk_it_prod
     FOREIGN KEY (id_produto) REFERENCES tb_Produtos(id_produto)

nome_prod varchar(50) not null,
Data datetime not null, 
Id_cliente int not null,
idVenda int not null
 
CONSTRAINT fk_nome_prod_vendas
FOREIGN KEY (idVenda) REFERENCES tb_vendas(idVenda),
 
idVendasc int not null 
CONSTRAINT fk_vendasc_Vendascan
FOREIGN KEY (idVendasc) REFERENCES tb_Vendas_Canceladas(id_Vendasc)

)
go
Create table Produtos(
id_produto int  not null primary key,
nome_prod  varchar(50) not null,
qtde_prod int not null,
preco decimal (10,2) not null

)
go
Insert  into Vendas values (1, 1, 'Impressora', '27/08/2019', 'Ayodele', 1),
			(2, 2, 'Teclado', '12/08/2019', 'Lucas', 2);
go
Insert  into cliente values (1, '21/03/2002',  'Guilherme Lima', 'Av Marechal Tito, 7455', 11990236381),
			(2, '25/04/2002',  'Lucas', 'Rua Major Boaventura, 567', 11984053357);
go
Insert  into Vendas_Canceladas  values (5, 'Mouse', '12/08/2019',  5  , 5),
			(6, 'Headset', '13/08/2019',  6  , 6);
go
Insert  into Item_Vendido values (10, 'Cabo HDMI', '14/08/2019', 10, 10),
			(20, 'PS4', '28/08/2019', 20, 20);
go
Insert  into Produtos (30, 'Placa mãe', 50,  550),
			(35, 'Fonte', 14,  250);
go
